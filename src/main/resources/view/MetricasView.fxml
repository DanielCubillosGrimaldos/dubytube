<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.dubytube.dubytube.viewController.MetricasController"
            fitToWidth="true" styleClass="root">
    
    <VBox spacing="20" prefWidth="900" styleClass="root">
        <padding><Insets top="24" right="32" bottom="24" left="32"/></padding>

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="16">
            <Text text="ðŸ“Š" style="-fx-font-size: 32px;" />
            <VBox spacing="4">
                <Label text="Panel de MÃ©tricas" styleClass="title-medium">
                    <font>
                        <Font name="System Bold" size="24.0" />
                    </font>
                </Label>
                <Label text="VisualizaciÃ³n de estadÃ­sticas y anÃ¡lisis del sistema" styleClass="label-secondary" />
            </VBox>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="ðŸ”„ Refrescar" onAction="#onRefrescar" styleClass="button-primary" />
            <Button text="â† Volver" onAction="#onVolver" styleClass="button-secondary" />
        </HBox>

        <Separator style="-fx-background-color: -fx-bg-tertiary;" />

        <!-- Summary Cards -->
        <GridPane hgap="16" vgap="16">
            <!-- Card: Total Canciones -->
            <VBox spacing="8" styleClass="card" style="-fx-padding: 20px; -fx-background-color: derive(-fx-accent, 80%); -fx-alignment: center;" 
                  GridPane.columnIndex="0" GridPane.rowIndex="0" prefWidth="200">
                <Text text="ðŸŽµ" style="-fx-font-size: 32px;" />
                <Label text="Total Canciones" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <Label fx:id="lblTotalCanciones" text="0" styleClass="title-medium" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: -fx-accent;" />
            </VBox>

            <!-- Card: Total Usuarios -->
            <VBox spacing="8" styleClass="card" style="-fx-padding: 20px; -fx-background-color: derive(#4CAF50, 80%); -fx-alignment: center;" 
                  GridPane.columnIndex="1" GridPane.rowIndex="0" prefWidth="200">
                <Text text="ðŸ‘¥" style="-fx-font-size: 32px;" />
                <Label text="Total Usuarios" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <Label fx:id="lblTotalUsuarios" text="0" styleClass="title-medium" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" />
            </VBox>

            <!-- Card: Total GÃ©neros -->
            <VBox spacing="8" styleClass="card" style="-fx-padding: 20px; -fx-background-color: derive(#FF9800, 80%); -fx-alignment: center;" 
                  GridPane.columnIndex="2" GridPane.rowIndex="0" prefWidth="200">
                <Text text="ðŸŽ¸" style="-fx-font-size: 32px;" />
                <Label text="Total GÃ©neros" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <Label fx:id="lblTotalGeneros" text="0" styleClass="title-medium" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #FF9800;" />
            </VBox>

            <!-- Card: Total Artistas -->
            <VBox spacing="8" styleClass="card" style="-fx-padding: 20px; -fx-background-color: derive(#9C27B0, 80%); -fx-alignment: center;" 
                  GridPane.columnIndex="3" GridPane.rowIndex="0" prefWidth="200">
                <Text text="ðŸŽ¤" style="-fx-font-size: 32px;" />
                <Label text="Total Artistas" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <Label fx:id="lblTotalArtistas" text="0" styleClass="title-medium" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #9C27B0;" />
            </VBox>
        </GridPane>

        <Separator style="-fx-background-color: -fx-bg-tertiary;" />

        <!-- Charts Row 1 -->
        <GridPane hgap="16" vgap="16">
            <!-- PieChart: GÃ©neros -->
            <VBox spacing="8" styleClass="card" GridPane.columnIndex="0" GridPane.rowIndex="0" prefWidth="420" prefHeight="350">
                <Label text="DISTRIBUCIÃ“N POR GÃ‰NERO" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <PieChart fx:id="chartGeneros" prefHeight="300" legendSide="BOTTOM" />
            </VBox>

            <!-- BarChart: Artistas -->
            <VBox spacing="8" styleClass="card" GridPane.columnIndex="1" GridPane.rowIndex="0" prefWidth="420" prefHeight="350">
                <Label text="TOP 10 ARTISTAS" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <BarChart fx:id="chartArtistas" prefHeight="300" legendVisible="false">
                    <xAxis>
                        <CategoryAxis side="BOTTOM" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis side="LEFT" />
                    </yAxis>
                </BarChart>
            </VBox>
        </GridPane>

        <!-- Charts Row 2 -->
        <GridPane hgap="16" vgap="16">
            <!-- LineChart: DÃ©cadas -->
            <VBox spacing="8" styleClass="card" GridPane.columnIndex="0" GridPane.rowIndex="0" prefWidth="420" prefHeight="350">
                <Label text="CANCIONES POR DÃ‰CADA" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <LineChart fx:id="chartDecadas" prefHeight="300" legendVisible="false">
                    <xAxis>
                        <CategoryAxis side="BOTTOM" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis side="LEFT" />
                    </yAxis>
                </LineChart>
            </VBox>

            <!-- AreaChart: Duraciones -->
            <VBox spacing="8" styleClass="card" GridPane.columnIndex="1" GridPane.rowIndex="0" prefWidth="420" prefHeight="350">
                <Label text="DURACIÃ“N PROMEDIO POR GÃ‰NERO" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
                <AreaChart fx:id="chartDuraciones" prefHeight="300" legendVisible="false">
                    <xAxis>
                        <CategoryAxis side="BOTTOM" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis side="LEFT" />
                    </yAxis>
                </AreaChart>
            </VBox>
        </GridPane>

        <!-- Footer Info -->
        <VBox spacing="8" styleClass="card" style="-fx-padding: 16px; -fx-background-color: -fx-bg-tertiary;">
            <Label text="ðŸ’¡ INFORMACIÃ“N" styleClass="label" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: -fx-text-secondary;" />
            <Label text="Los grÃ¡ficos se actualizan automÃ¡ticamente al cargar la vista. Usa el botÃ³n 'Refrescar' para actualizar los datos." 
                   styleClass="label-secondary" style="-fx-font-size: 12px;" wrapText="true"/>
            <Label text="RF-014: VisualizaciÃ³n de mÃ©tricas con JavaFX Charts - PieChart, BarChart, LineChart, AreaChart" 
                   styleClass="label-secondary" style="-fx-font-size: 11px; -fx-font-style: italic;" wrapText="true"/>
        </VBox>
    </VBox>
</ScrollPane>
